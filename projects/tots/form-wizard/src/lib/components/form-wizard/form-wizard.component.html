<div class="tots-wizard-form">
  
  <h1>{{config.title}}</h1>

  <div class="tots-wizard-form-container" [ngClass]="{'side-stepper': config.stepperPosition=='side', 'top-stepper':config.stepperPosition=='top'}">

    <div class="tots-wizard-form-header">
      <mat-stepper labelPosition="bottom" #stepper [linear]="true" [orientation]="stepperOrientation" [selectedIndex]="selectedIndex" (selectionChange)="onStepChange($event)" class="disable_click">
        <mat-step *ngFor="let step of config.steps; let index = index">
          <ng-template matStepLabel>{{step.title}}</ng-template>
        </mat-step>
      </mat-stepper>
    </div>
  
    <div class="tots-wizard-form">
  
      <div class="tots-wizard-form-body">
        <mat-tab-group [selectedIndex]="selectedIndex">
          <mat-tab *ngFor="let step of config.steps">
            <h1 class="tots-wizard-form-step-title">{{step.title}}</h1>
            <tots-form #form [fields]="step.fields" [item]="config.item" (onAction)="onActionForm($event)" [autoSave]="true"></tots-form>
          </mat-tab>
        </mat-tab-group>
      </div>
  
      <div class="tots-wizard-form-actions">
        <div class="wizard-form-left">
          <button *ngIf="selectedIndex != config.steps.length-1 && currentStep.hasSkip" mat-button [color]="skipButtonColor" (click)="onClickContinue()" [disabled]="currentStep.isLoading">{{skipButtonCaption}}</button>
        </div>
        <div class="wizard-form-right">
          <button *ngIf="selectedIndex > 0" mat-button [class]="backButtonDirectiveClass" [color]="backButtonColor" (click)="onClickBack()" [disabled]="currentStep.isLoading">{{backButtonCaption}}</button>
          <button *ngIf="selectedIndex != config.steps.length-1" mat-button [class]="nextSubmitButtonDirectiveClass" [color]="nextSubmitStepButtonColor" (click)="onClickContinue()" [disabled]="isNextSubmitDisabled()">
            <div class="button_inner_container">
              <mat-spinner matPrefix *ngIf="currentStep.isLoading" diameter="16" strokeWidth="2"></mat-spinner>
              <span>{{nextStepButtonCaption}}</span>
            </div>
          </button>
          <button *ngIf="selectedIndex == config.steps.length-1" mat-button [color]="nextSubmitStepButtonColor" (click)="onClickSave()" [disabled]="isNextSubmitDisabled()">
            <div class="button_inner_container">
              <mat-spinner matPrefix *ngIf="currentStep.isLoading" diameter="16" strokeWidth="2"></mat-spinner>
              <span>{{submitButtonCaption}}</span>
            </div>
          </button>
        </div>
      </div>
  
    </div>

  </div>

</div>
